# 文件搜索工具 (FileFinder)

一个功能强大的 Windows 文件搜索 GUI 应用，支持多关键字搜索、后缀名过滤、并行搜索和智能缓存。

## 功能特性

- 🔍 **多关键字搜索**：支持空格分隔的多个关键字（AND 逻辑），支持引号包裹短语
- 📁 **后缀名过滤**：可选的文件扩展名过滤，加速搜索速度
- ⚡ **并行处理**：利用多核处理器并行搜索，提高搜索效率
- 💾 **智能缓存**：自动缓存文件列表，加快重复搜索
- 📊 **结果管理**：Treeview 表格展示结果，支持按大小排序
- 🎯 **快捷操作**：右键菜单快速打开文件、打开文件夹、复制路径
- 📝 **搜索历史**：记录最近搜索的关键字、文件夹和后缀名
- ⌨️ **快捷键**：Enter 开始搜索，Esc 停止搜索
- 🌐 **多编码支持**：自动检测 UTF-8、GBK、GB2312 等编码

## 项目结构

```
find/
├── src/                      # 源代码
│   ├── app.py               # 主应用程序和 UI
│   ├── cache_manager.py     # 缓存管理
│   ├── config_manager.py    # 配置文件管理
│   ├── file_searcher.py     # 核心搜索引擎
│   └── utils.py             # 工具函数
├── assets/                   # 资源文件
│   ├── icon.ico             # 应用图标
│   └── icon.png             # 原始图标
├── scripts/                  # 脚本
│   ├── 编译.bat              # Windows 编译脚本
│   └── 运行.bat              # Windows 运行脚本
├── tools/                    # 开发工具
│   ├── convert_icon.py       # 图标转换脚本
│   └── FileFinder.spec       # PyInstaller 配置文件
├── dist/                     # 编译生成的可执行文件
├── .venv/                    # Python 虚拟环境（本地开发）
├── .gitignore               # Git 忽略文件
└── README.md                # 本文件
```

## 快速开始

### 使用编译版本（推荐）

1. 下载 `dist/FileFinder.exe`
2. 双击运行即可

### 从源代码运行

**要求**：Python 3.9+

1. 克隆或下载项目
2. 创建虚拟环境（可选但推荐）：
   ```bash
   python -m venv .venv
   .venv\Scripts\activate
   ```
3. 双击 `scripts\运行.bat` 启动应用

### 编译成可执行文件

双击 `scripts\编译.bat` 即可生成 `dist/FileFinder.exe`

**要求**：
- Python 3.9+
- PyInstaller：`pip install pyinstaller`

## 使用说明

### 基本操作

1. **选择搜索文件夹**：点击"浏览..."按钮选择要搜索的文件夹
2. **输入关键字**：在关键字框输入搜索文本
   - 多个关键字用空格分隔，文件需包含所有关键字（AND 逻辑）
   - 使用引号包裹短语，如 `"hello world"` 作为整体搜索
3. **设置后缀名过滤**（可选）：
   - 输入文件扩展名，如 `.py .txt .log`
   - 多个后缀用空格分隔
4. **开始搜索**：点击"开始搜索"或按 Enter 键

### 结果操作

- **排序**：搜索完成后可按文件大小升序或降序排列
- **打开文件**：双击结果行或右键选择"打开文件"
- **打开文件夹**：右键选择"打开所在文件夹"
- **复制路径**：右键选择"复制文件路径"或"复制文件名"

### 搜索历史

- 应用自动保存搜索历史（最近 10 条）
- 可在对应的下拉框中快速选择之前的搜索
- 在帮助窗口中可点击"清理缓存"一键清除所有历史和缓存

## 缓存机制

- **文件列表缓存**：系统自动缓存扫描过的文件夹内容
- **缓存位置**：`~/.file_finder_cache/`
- **缓存更新**：当文件夹内容变化时自动更新缓存
- **搜索内容**：每次搜索都重新检查文件内容，确保结果准确

## 支持的文件类型

- **文本**：`.txt`, `.log`, `.csv`, `.json`, `.xml`, `.yaml`, `.toml`, `.ini`
- **代码**：`.py`, `.java`, `.cpp`, `.c`, `.js`, `.html`, `.css`, `.php`, `.rb`, `.go`
- **其他**：`.md`, `.dat` 等
- **二进制检测**：自动过滤图片、视频、压缩包等不需要搜索的二进制文件

## 代码模块

### `app.py`
主应用程序，包含 UI 设计和交互逻辑。使用 tkinter 构建 GUI。

### `cache_manager.py`
管理文件列表缓存，使用 pickle 序列化存储。

### `config_manager.py`
管理应用配置和搜索历史，使用 JSON 格式存储。

### `file_searcher.py`
核心搜索引擎，支持：
- 多关键字 AND 逻辑搜索
- 多编码文件读取
- 二进制文件检测和过滤
- ThreadPoolExecutor 并行处理

### `utils.py`
工具函数，包括关键字解析和后缀名处理。

## 常见问题

**Q：为什么第一次搜索较慢？**
A：首次需要扫描文件夹建立文件列表缓存，后续会使用缓存加速。

**Q：缓存占用多少空间？**
A：非常小，通常几 KB 到几十 KB，仅存储文件路径列表。

**Q：搜索会缓存结果吗？**
A：不会。系统只缓存文件列表，每次搜索都重新检查文件内容。

**Q：能否搜索二进制文件？**
A：支持混合型二进制文件（如 .dat），纯二进制文件会被自动过滤。

**Q：搜索区分大小写吗？**
A：不区分，"Test" 和 "test" 的搜索结果相同。

## 技术栈

- **GUI 框架**：tkinter（Python 标准库）
- **并发**：concurrent.futures.ThreadPoolExecutor
- **打包**：PyInstaller
- **Python 版本**：3.9+

## 许可证

MIT License

## 作者

Created with Python and tkinter
